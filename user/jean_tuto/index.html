



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/bdm_logo.png">
      <meta name="generator" content="mkdocs-0.17.4, mkdocs-material-2.9.2">
    
    
      
        <title>Tumor Concept - BioDynaMo User Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.ba0fd1a6.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
      
        
        
        <meta name="theme-color" content="#4caf50">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="green" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#biodynamo-short-tutorial" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="BioDynaMo User Documentation" class="md-header-nav__button md-logo">
          
            <img src="../images/bdm_logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                BioDynaMo User Documentation
              </span>
              <span class="md-header-nav__topic">
                Tumor Concept
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/BioDynaMo/biodynamo" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      BioDynaMo/biodynamo
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../images/bdm_logo.png" width="48" height="48">
      
    </span>
    BioDynaMo User Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/BioDynaMo/biodynamo" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      BioDynaMo/biodynamo
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../first_steps/" title="First Steps" class="md-nav__link">
      First Steps
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hello_world/" title="Hello World" class="md-nav__link">
      Hello World
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../visualization/" title="Visualization" class="md-nav__link">
      Visualization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../diffusion/" title="Diffusion" class="md-nav__link">
      Diffusion
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Tumor Concept
      </label>
    
    <a href="./" title="Tumor Concept" class="md-nav__link md-nav__link--active">
      Tumor Concept
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-creation" title="Structure creation" class="md-nav__link">
    Structure creation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cells-and-biology-module" title="Cells and biology Module" class="md-nav__link">
    Cells and biology Module
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-cells" title="Creating cells" class="md-nav__link">
    Creating cells
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#biology-module" title="Biology module" class="md-nav__link">
    Biology module
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualisation-using-paraview" title="Visualisation using Paraview" class="md-nav__link">
    Visualisation using Paraview
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paraview" title="Paraview" class="md-nav__link">
    Paraview
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#live-visualisation" title="Live visualisation" class="md-nav__link">
    Live visualisation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-visualisation" title="Export Visualisation" class="md-nav__link">
    Export Visualisation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-layers-colour" title="Adding layers colour" class="md-nav__link">
    Adding layers colour
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transmitting-its-colour-and-playing-with-filters" title="Transmitting its colour and playing with Filters" class="md-nav__link">
    Transmitting its colour and playing with Filters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-some-complexity" title="Adding some complexity" class="md-nav__link">
    Adding some complexity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diffusion" title="Diffusion" class="md-nav__link">
    Diffusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code" title="Code" class="md-nav__link">
    Code
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tutorialcc" title="tutorial.cc" class="md-nav__link">
    tutorial.cc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tutorialh-chapter-22" title="tutorial.h - chapter 2.2" class="md-nav__link">
    tutorial.h - chapter 2.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tutorialh-chapter-34" title="tutorial.h - chapter 3.4" class="md-nav__link">
    tutorial.h - chapter 3.4
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../substance_initializers/" title="Substance Initialization" class="md-nav__link">
      Substance Initialization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gpu_acceleration/" title="GPU Acceleration" class="md-nav__link">
      GPU Acceleration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contact/" title="Contact" class="md-nav__link">
      Contact
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-creation" title="Structure creation" class="md-nav__link">
    Structure creation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cells-and-biology-module" title="Cells and biology Module" class="md-nav__link">
    Cells and biology Module
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-cells" title="Creating cells" class="md-nav__link">
    Creating cells
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#biology-module" title="Biology module" class="md-nav__link">
    Biology module
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualisation-using-paraview" title="Visualisation using Paraview" class="md-nav__link">
    Visualisation using Paraview
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paraview" title="Paraview" class="md-nav__link">
    Paraview
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#live-visualisation" title="Live visualisation" class="md-nav__link">
    Live visualisation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-visualisation" title="Export Visualisation" class="md-nav__link">
    Export Visualisation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-layers-colour" title="Adding layers colour" class="md-nav__link">
    Adding layers colour
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transmitting-its-colour-and-playing-with-filters" title="Transmitting its colour and playing with Filters" class="md-nav__link">
    Transmitting its colour and playing with Filters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-some-complexity" title="Adding some complexity" class="md-nav__link">
    Adding some complexity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diffusion" title="Diffusion" class="md-nav__link">
    Diffusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code" title="Code" class="md-nav__link">
    Code
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tutorialcc" title="tutorial.cc" class="md-nav__link">
    tutorial.cc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tutorialh-chapter-22" title="tutorial.h - chapter 2.2" class="md-nav__link">
    tutorial.h - chapter 2.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tutorialh-chapter-34" title="tutorial.h - chapter 3.4" class="md-nav__link">
    tutorial.h - chapter 3.4
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="biodynamo-short-tutorial">BioDynaMo short tutorial</h1>
<p>Written by Jean de Montigny  </p>
<h2 id="introduction">Introduction</h2>
<p>BioDynaMo is platform for computer simulations of biological dynamics. You can learn more about BioDynaMo by accessing its official website.</p>
<p>This Tutorial in designed for user with limited knowledge of C++ language and will teach you the basics of BioDynaMo:</p>
<ul>
<li>Create, build and run a new project</li>
<li>Create cells with a specific behaviour through a biological module</li>
<li>Extend an existing structure</li>
<li>visualise a simulation</li>
</ul>
<h3 id="installation">Installation</h3>
<p>You can access the installation page by clicking <a href="https://biodynamo.github.io/user/installation/">here</a>.</p>
<h3 id="structure-creation">Structure creation</h3>
<p>As BioDynaMo is written is C++, it needs a particular structure. Fortunately, this procedure is really easy with BioDynaMo. To create a new project, you just need to run the command <code class="codehilite">biodynamo new &lt;project&gt;</code>. If you wish not to have your Github account linked to your project you can append the <code class="codehilite">--no-github</code> option to the command. Try opening a terminal and running the command <code class="codehilite">biodynamo new tutorial</code>. This will create a folder named tutorial in your current directory, containing everything that BioDynaMo needs. Inside tutorial/src, two files with the basic structure already written have been created: tutorial.cc and tutorial.h. tutorial.cc will only contain the call to the header tutorial.h which will be the core of our work. You can easily run your code by typing the command <code class="codehilite">biodynamo run</code>.</p>
<h2 id="cells-and-biology-module">Cells and biology Module</h2>
<p>The structure build in the previous chapter only creates a single cell. In this chapter we will in a first time create more cells in order to building a square of 2 400 randomly distributed cells. Then in a second time, we will create a number of cancerous cells, that will grow and divide.</p>
<h3 id="creating-cells">Creating cells</h3>
<p>To do so, we will work only on the <code class="codehilite">Simulate</code> function of the tutorial.h file. First, before the Simulate method, we will tell BioDynaMo to use the ResourceManager by adding the line
<div class="codehilite"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">TResourceManager</span> <span class="o">=</span> <span class="n">ResourceManager</span> <span class="o">&lt;&gt;&gt;</span>
</pre></div></p>
<p>This ResourceManager will be used to create cells. Inside the Simulate method, we need to define a resource manager and a structure to contain our cells:
<div class="codehilite"><pre><span></span><span class="k">auto</span> <span class="n">rm</span> <span class="o">=</span> <span class="n">TResourceManager</span><span class="o">::</span><span class="n">Get</span><span class="p">();</span> <span class="c1">// set up resource manager</span>
<span class="k">auto</span> <span class="n">cells</span> <span class="o">=</span> <span class="n">rm</span><span class="o">-&gt;</span><span class="k">template</span> <span class="n">Get</span><span class="o">&lt;</span><span class="n">Cell</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// create a structure to contain cells</span>
</pre></div></p>
<p>Because we want 2400 cells randomly distributed, it is mandatory to have an random number generator to generate x, y and z coordinate of each cell. For that, we will declare three double (x_coord, y_coord and z_coord) and use the gTRandom.Uniform random engine
<div class="codehilite"><pre><span></span>  <span class="kt">size_t</span> <span class="n">nb_of_cells</span><span class="o">=</span><span class="mi">2400</span><span class="p">;</span> <span class="c1">// number of cells in the simulation</span>
  <span class="n">Param</span><span class="o">::</span><span class="n">min_bound_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">Param</span><span class="o">::</span><span class="n">max_bound_</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// cube of 100*100*100</span>
  <span class="kt">double</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">;</span>
  <span class="n">cells</span><span class="o">-&gt;</span><span class="n">reserve</span><span class="p">(</span><span class="n">nb_of_cells</span><span class="p">);</span> <span class="c1">// allocate the correct number of cell in our cells structure before cell creation</span>
</pre></div></p>
<p>Then, with a simple loop from 0 to the number of cells, we will be able to fill this cells structure with cell elements.
<div class="codehilite"><pre><span></span>  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nb_of_cells</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// our modelling will be a cell cube of 100*100*100</span>
    <span class="n">x_coord</span><span class="o">=</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Param</span><span class="o">::</span><span class="n">max_bound</span><span class="p">);</span> <span class="c1">// random double between 0 and 100</span>
    <span class="n">y_coord</span><span class="o">=</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Param</span><span class="o">::</span><span class="n">max_bound</span><span class="p">);</span>
    <span class="n">z_coord</span><span class="o">=</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Param</span><span class="o">::</span><span class="n">max_bound</span><span class="p">);</span>
    <span class="n">Cell</span> <span class="nf">cell</span><span class="p">({</span><span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">});</span> <span class="c1">// creating the cell at position x, y, z</span>
    <span class="c1">// set cell parameters</span>
    <span class="n">cell</span><span class="p">.</span><span class="n">SetDiameter</span><span class="p">(</span><span class="mf">7.5</span><span class="p">);</span>

    <span class="n">cells</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">cell</span><span class="p">);</span> <span class="c1">// put the created cell in our cells structure</span>
  <span class="p">}</span>
</pre></div></p>
<p>We now have our structure containing all the 2400 cells! The code in charge of running our modelling is already written and will simulate it for only one step. Lets change this to simulate for 100 steps.
<div class="codehilite"><pre><span></span><span class="n">Scheduler</span><span class="o">&lt;&gt;</span> <span class="n">scheduler</span><span class="p">;</span>
<span class="n">scheduler</span><span class="p">.</span><span class="n">Simulate</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</pre></div></p>
<h3 id="biology-module">Biology module</h3>
<p>In the previous chapter, we created a great number of cells. However, those cells don’t do anything! We will here create a cancerous cell that will grow and divide when it reaches a certain diameter. For this, we will define a new biology module structure GrowthModule that will be applied to cell elements, and we will make this GrowthModule copied into the cell daughter (so the daughter will also contain an instance of the biology module GrowthModule)
<div class="codehilite"><pre><span></span>  <span class="k">struct</span> <span class="nl">GrowthModule</span> <span class="p">:</span> <span class="k">public</span> <span class="n">BaseBiologyModule</span> <span class="p">{</span>
  <span class="n">GrowthModule</span><span class="p">()</span> <span class="o">:</span> <span class="n">BaseBiologyModule</span><span class="p">(</span><span class="n">gAllBmEvents</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
      <span class="kt">void</span> <span class="n">Run</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">cell</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// code to be executed each at simulation step</span>
      <span class="p">}</span>

    <span class="n">ClassDefNV</span><span class="p">(</span><span class="n">GrowthModule</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">};</span>
</pre></div></p>
<p>We are now able to add any code in the Run() method, that will be executed at each simulation step for each cell containing this GrowthModule. In our case, it will be a cellular growth, until a certain diameter is reached and then a cell division:
<div class="codehilite"><pre><span></span>      <span class="k">if</span> <span class="p">(</span><span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetDiameter</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cell</span><span class="o">-&gt;</span><span class="n">ChangeVolume</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="n">cell</span><span class="o">-&gt;</span><span class="n">Divide</span><span class="p">();</span>
      <span class="p">}</span>
</pre></div></p>
<p>After creating our GrowthModule, we need to add this Biology module to the compile time parameter, to tell BioDynaMo to use this new BiologyModule
<div class="codehilite"><pre><span></span>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Backend</span><span class="o">&gt;</span>
    <span class="k">struct</span> <span class="nl">CompileTimeParam</span> <span class="p">:</span> <span class="k">public</span> <span class="n">DefaultCompileTimeParam</span><span class="o">&lt;</span><span class="n">Backend</span><span class="o">&gt;</span> <span class="p">{</span>
      <span class="k">using</span> <span class="n">BiologyModules</span> <span class="o">=</span> <span class="n">Variant</span><span class="o">&lt;</span><span class="n">GrowthModule</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// add GrowthModule</span>
  <span class="p">};</span>
</pre></div></p>
<p>Of course, we need to create at least one cell that contain our GrowthModule in our Simulate method
<div class="codehilite"><pre><span></span>  <span class="n">Cell</span> <span class="nf">cell</span> <span class="p">({</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">});</span>
  <span class="n">cell</span><span class="p">.</span><span class="n">SetDiameter</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
  <span class="n">cell</span><span class="p">.</span><span class="n">AddBiologyModule</span><span class="p">(</span><span class="n">GrowthModule</span><span class="p">());</span>
  <span class="n">cells</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">cell</span><span class="p">);</span>
</pre></div></p>
<p>This code is now able to create and simulate 2 400 normal cells and 1 cancerous cell that will grow and divide! Complete codes for tutorial.cc and tutorial.h of this chapter are accessible at the end of this tutorial.</p>
<h2 id="visualisation-using-paraview">Visualisation using Paraview</h2>
<p>In the previous chapter we created a simulation of a great number of cell, also containing dividing cancerous cells, but we were not able to visualise anything! In this chapter, we will set up a visualisation using Paraview (included in the BioDynaMo package).</p>
<h3 id="paraview">Paraview</h3>
<p><a href="https://www.paraview.org/">Paraview</a> is an open source application for interactive and scientific visualisation. First of all, we need to tell BioDynaMo that we will use Paraview and so that we want the visualisation to be enable. To do that, we need to create a configuration file <code class="codehilite">bdm.toml</code> in the tutorial folder. Visualisation is of course not the only configuration we can do using this file. You can allow live visualisation and/or export visualisation (here every 2 simulation step) by adding in bdm.toml
<div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">visualization</span><span class="p">]</span>
<span class="n">live</span> <span class="o">=</span> <span class="nb">true</span>
<span class="k">export</span> <span class="o">=</span> <span class="nb">false</span>
<span class="n">export_interval</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div></p>
<p>you also can say to Paraview to visualise a particular parameter of ours cells, for example the diameter of every cells. Do do that, add below [visualization] in the configuration file the following lines
<div class="codehilite"><pre><span></span>    <span class="p">[[</span><span class="n">visualize_sim_object</span><span class="p">]]</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Cell&quot;</span>
    <span class="n">additional_data_members</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&quot;diameter_&quot;</span> <span class="p">]</span>
</pre></div>
Because those visualisation parameters are not in the source code, you don’t need to compile your code again.
We can note that instead of creating a configuration file, you can do the same by adding directly in our Simulate function the lines
<div class="codehilite"><pre><span></span>    <span class="n">Param</span><span class="o">::</span><span class="n">live_visualization_</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// allows live visualisation</span>
    <span class="n">Param</span><span class="o">::</span><span class="n">export_visualization_</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// allows export of visualisation files</span>
    <span class="n">Param</span><span class="o">::</span><span class="n">visualization_export_interval_</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// export visualisation files every 2 steps</span>
    <span class="n">Param</span><span class="o">::</span><span class="n">visualize_sim_objects_</span><span class="p">[</span><span class="s">&quot;Cell&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">{</span> <span class="s">&quot;diameter_&quot;</span> <span class="p">};</span> <span class="c1">// add the data member diameter_ to the visualisation objects</span>
</pre></div>
Once again, it is important to note that if you want to change any visualisation parameter using this second method, you will have to compile again your code. That is not the case using a configuration file. Hence, using the toml file is highly recommended.  </p>
<p>We will first see live visualisation then the export visualisation. In both cases, simply run Paraview using the console line command <code class="codehilite">paraview &amp;</code>. This windows should appears</p>
<p><img alt="Open ParaView" src="../images/jean_tutorial/paraview1.png" /></p>
<h4 id="live-visualisation">Live visualisation</h4>
<p>Click on the <em>Catalyst</em> top menu, and select <em>Connect</em> This windows should appears</p>
<p><img alt="Connect ParaView" src="../images/jean_tutorial/paraview2.png" /></p>
<p>Click OK, then this windows should appears</p>
<p><img alt="Connect ready" src="../images/jean_tutorial/paraview3.png" /></p>
<p>Your Paraview is now accepting connections! Click OK, go back to the <em>Catalyst</em> menu, and select <em>Pause Simulation</em>. Using the same console, launch your tutorial simulation. You now notice that the programme stop right before running the simulation, because we used the Paraview <em>Pause Simulation</em>.</p>
<p><img alt="terminal accetped connection" src="../images/jean_tutorial/paraview4.png" /></p>
<p>Go back to Paraview. You notice that new objects have appeared in the <em>Pipeline Browser</em> section. Click on the round shape in front of <em>Cells Glyph</em>.</p>
<p><img alt="select Cells_glyph" src="../images/jean_tutorial/paraview5.png" /></p>
<p>A new Builtin object have appeared: <em>Extract: Cells Glyph</em>. Click on the eye in front of it.</p>
<p><img alt="select Extract Cells_glyph" src="../images/jean_tutorial/paraview6.png" /></p>
<p>All cells appear on the screen!
You can now go to the <em>Catalyst</em> menu, and select <em>Continue</em>. The simulation will run the number of steps you specified in your code.</p>
<p><img alt="Cell display correct diam" src="../images/jean_tutorial/paraview7-4.png" /></p>
<p>Even if live visualisation is particularly useful to set or tune a simulation, it is capital to note that it also drastically slows down the simulation! One way to avoid this major problem is to export visualisation files and read then after the modelling is done.</p>
<h4 id="export-visualisation">Export Visualisation</h4>
<p>In the configuration file (bdm.toml), turn the export parameter to true then run your modelling. You’ll notice the creation of several new files with the following file extensions <code class="codehilite">*.pvsm, *.pvtu, *.vtu, *pvti, *.vti</code>. Open ParaView and load the generated state file as described in <a href="../visualization/#export-visualization-files">Section Visualization</a>.</p>
<p>A major advantage of export visualisation, in addition of not impacting the simulation time, is that you can visualise your modelling freely in time. using the arrows in the top menu, you can choose respectively to go back to the beginning of the simulation, go one step back, run normally, go one step further or go to the end of the simulation. You also can see witch step you are currently visualising (remember that this step number is the number of your modelling step divided by the export_interval you choose in your configuration file).</p>
<p><img alt="Paraview time" src="../images/jean_tutorial/paraview17.png" /></p>
<p>In both cases, even if we can now visualise our cell, they have all the same colour, which can be a bit confusing and doesn't allow us to visualise properly what is going on.</p>
<h3 id="adding-layers-colour">Adding layers colour</h3>
<p>In this chapter, we will modify our code in order to create a better colouring for our simulation.<br />
A good idea would be to create a colouring depending on the y axis coordinate. By this way, we could display several layers of cell, and have an other colour for our cancerous cells.
To do that, we can extend the existing <code class="codehilite">Cell</code> class in order to add a new data member <code class="codehilite">cell_colour</code>.
We will do that directly in our tutorial.h file by writing
<div class="codehilite"><pre><span></span>  <span class="c1">// Define my custom cell MyCell, which extends Cell by adding extra data members: cell_colour</span>
  <span class="n">BDM_SIM_OBJECT</span><span class="p">(</span><span class="n">MyCell</span><span class="p">,</span> <span class="n">bdm</span><span class="o">::</span><span class="n">Cell</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// our object extends the Cell object</span>
    <span class="n">BDM_SIM_OBJECT_HEADER</span><span class="p">(</span><span class="n">MyCellExt</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cell_colour_</span><span class="p">);</span> <span class="c1">// create the header with our new data member</span>

    <span class="k">public</span><span class="o">:</span>
      <span class="n">MyCellExt</span><span class="p">()</span> <span class="p">{}</span>
      <span class="n">MyCellExt</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;&amp;</span> <span class="n">position</span><span class="p">)</span> <span class="o">:</span> <span class="n">Base</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// our creator</span>
      <span class="c1">// getter and setter for our new data member</span>
      <span class="kt">void</span> <span class="n">SetCelColour</span><span class="p">(</span><span class="kt">int</span> <span class="n">cellColour</span><span class="p">)</span> <span class="p">{</span> <span class="n">cell_colour_</span><span class="p">[</span><span class="n">kIdx</span><span class="p">]</span> <span class="o">=</span> <span class="n">cellColour</span><span class="p">;</span> <span class="p">}</span>
      <span class="kt">int</span> <span class="n">GetCellColour</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">cell_colour_</span><span class="p">[</span><span class="n">kIdx</span><span class="p">];</span> <span class="p">}</span>
      <span class="kt">int</span><span class="o">*</span> <span class="n">GetCellColourPtr</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">cell_colour_</span><span class="p">.</span><span class="n">data</span><span class="p">();</span> <span class="p">}</span>

    <span class="k">private</span><span class="o">:</span>
    <span class="c1">// private data can only be accessed by public function and not directly</span>
      <span class="n">vec</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">cell_colour_</span><span class="p">;</span> <span class="c1">// declare our new data member and define its type</span>
  <span class="p">};</span>
</pre></div></p>
<p>Don't forget to add this new object to your compile time parameters (inside "struct CompileTimeParam") so BioDynaMo know that we want to use our custom <code class="codehilite">MyCell</code> object. This is done by adding the line
<div class="codehilite"><pre><span></span>    <span class="k">using</span> <span class="n">AtomicTypes</span> <span class="o">=</span> <span class="n">VariadicTypedef</span><span class="o">&lt;</span><span class="n">MyCell</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div></p>
<p>Each cell (implementing our new object <code class="codehilite">MyCell</code>) of the modelling is now able to have a value cell_colour_ that we will choose and use to display different colours!<br />
In order to create cells with this attribute, we need to replace all Cell object by MyCell during cells creation (inside the <code class="codehilite">Simulate()</code> method). for example
<div class="codehilite"><pre><span></span><span class="c1">//  auto cells = rm-&gt;template Get&lt;Cell&gt;(); // previous structure containing Cell objects</span>
  <span class="k">auto</span> <span class="n">cells</span> <span class="o">=</span> <span class="n">rm</span><span class="o">-&gt;</span><span class="k">template</span> <span class="n">Get</span><span class="o">&lt;</span><span class="n">MyCell</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// new structure containing MyCell objects</span>
<span class="p">[...]</span>
<span class="c1">//     Cell cell({x_coord, y_coord, z_coord}); // creats a cell as a Cell object; so doesn&#39;t contain cell_colour_</span>
    <span class="n">MyCell</span> <span class="n">cell</span><span class="p">({</span><span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">});</span> <span class="c1">// creats a cell as a MyCell object; so contains cell_colour_</span>
</pre></div></p>
<p>Now that we are creating cells implementing MyCell, we can set the cancerous cell cell_colour_ value to 8 (so it will have a really distinct colour from non cancerous cells). To do so, simply use the method SetCellColour() we created
<div class="codehilite"><pre><span></span>    <span class="n">cell</span><span class="p">.</span><span class="n">SetCellColour</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
</pre></div></p>
<p>Do the same for the regular cells, setting the value depending on the y axis value. One possibility is to write
<div class="codehilite"><pre><span></span>    <span class="n">cell</span><span class="p">.</span><span class="n">SetCellColour</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span> <span class="n">y_coord</span><span class="o">/</span><span class="n">Param</span><span class="o">::</span><span class="n">max_bound_</span><span class="o">*</span><span class="mi">6</span><span class="p">);</span> <span class="c1">// will vary from 0 to 5. so 6 different layers depending on y_coord</span>
</pre></div></p>
<p>This new simulation is now functional, however before running it, we need to tell BioDynamo to communicates all cell_colour_ values. Do do that, we will modify the configuration file bdm.toml by modifying the visualize_sim_object
<div class="codehilite"><pre><span></span>    <span class="p">[[</span><span class="n">visualize_sim_object</span><span class="p">]]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MyCell&quot;</span>
        <span class="n">additional_data_members</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&quot;diameter_&quot;</span> <span class="p">,</span> <span class="s">&quot;cell_colour_&quot;</span> <span class="p">]</span>
</pre></div></p>
<p>With those changes, we are now able to colourise our different layers. All you have to do, after displaying cells and creating the <em>Glyph</em> filter (chapter 3.1) is to select your <em>Glyph</em> filter and to select cell_colour_ in the <em>Coloring</em> section.</p>
<p><img alt="Paraview select colour" src="../images/jean_tutorial/paraview8.png" /></p>
<p>Well done, we can now visualise the different layers and the cancerous cell in red!</p>
<p><img alt="Paraview colour layers" src="../images/jean_tutorial/paraview9.png" /></p>
<p>However, there still is a little problem. The attribute cell_colour_ is not transmitted to the daughter cell after a division. You can also notice that it is not really easy to see the cancerous cells. We will solve those issues in the next chapter.</p>
<h3 id="transmitting-its-colour-and-playing-with-filters">Transmitting its colour and playing with Filters</h3>
<p>To enable dividing cells to transmit its colour - meaning its cell_colour_ attribute value - we have to modify a little our biology module.
<div class="codehilite"><pre><span></span><span class="c1">//        cell-&gt;Divide(); // old</span>
        <span class="k">auto</span> <span class="n">daughter</span> <span class="o">=</span> <span class="n">cell</span><span class="o">-&gt;</span><span class="n">Divide</span><span class="p">();</span> <span class="c1">// we now have access to the daughter</span>
        <span class="n">daughter</span><span class="o">-&gt;</span><span class="n">SetCellColour</span><span class="p">(</span><span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetCellColour</span><span class="p">());</span> <span class="c1">// daughter cell_colour_ is setted to her mother cell_colour_ value</span>
</pre></div></p>
<p>Even if our cancerous cells transmit their colour to their daughter, it still is not really easy to spot them in the middle of thousands of other cells. This problem can be solve using the threshold filter function of Paraview. To do that, after displaying cells colour as at the end of 3.2, click on the threshold filter button. This filter will be applied to the currently selected <em>Pipeline Browser</em>, so pay attention to select the correct one (<em>Glyph1</em>) before creating the threshold filter.</p>
<p><img alt="Paraview threshold filter" src="../images/jean_tutorial/paraview10.png" /></p>
<p>On the <em>Properties</em> menu, select the <em>Scalar</em> <em>cell_colour_</em>, put the minimum value at 7 and the maximum at 8 (so only the value of cancerous cell is selected) then click <em>Apply</em></p>
<p><img alt="Paraview threshold filter scalar" src="../images/jean_tutorial/paraview11.png" /></p>
<p>Finaly, choose the <em>Coloring</em> mode <em>cell_colour_</em>.</p>
<p><img alt="Paraview threshold filter colouring" src="../images/jean_tutorial/paraview12.png" /></p>
<p>Great, we can now choose to display either all the cells, or just the cancerous cells by selecting either the <em>Glyph1</em> or the <em>Threshold1</em> in the <em>Pipeline Browser</em>!</p>
<p><img alt="Paraview threshold display" src="../images/jean_tutorial/paraview13.png" /></p>
<p>This is of course just an example of what you can do with the threshold filters.</p>
<h3 id="adding-some-complexity">Adding some complexity</h3>
<p>We now have all we want to visualise our modelling in the best conditions, but this modelling itself is a bit limited. We should add some movements to it as well as a new mechanism to complexify cell division.
To add cell movement, we will modify the <code class="codehilite">Run()</code> method of our biology module <code class="codehilite">GrowthModule</code>, and use the function <code class="codehilite">UpdatePosition()</code>. To generate the direction's random numbers we will again use the <code class="codehilite">gTRandom.Uniform()</code> function which allow us to generate a random number between two specified numbers.<br />
We choose here to give stochastic movement only to growing cells, so we will write the movement just after the volume change
<div class="codehilite"><pre><span></span>    <span class="n">array</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span> <span class="n">cell_movements</span><span class="p">{</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)};</span> <span class="c1">// create an array of 3 random numbers between -2 and 2</span>
    <span class="n">cell</span><span class="o">-&gt;</span><span class="n">UpdatePosition</span><span class="p">(</span><span class="n">cell_movements</span><span class="p">);</span> <span class="c1">// update the cell mass location, ie move the cell</span>
    <span class="n">cell</span><span class="o">-&gt;</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetPosition</span><span class="p">());</span> <span class="c1">// set the cell position</span>
</pre></div></p>
<p>Using the previous chapters, you should now be able to visualise cell movement during their growth.<br />
This is great, but every cancerous cell grows and divides indefinitely, and that is a bit too much. We will now add a mechanism to reduce the probability to divide, and assuring that a cancerous cell that didn't divide, will never divide any more.<br />
To add a 0.8 probability to divide, simply write
<div class="codehilite"><pre><span></span>    <span class="k">if</span> <span class="p">(</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.8</span><span class="p">){</span>
      <span class="k">auto</span> <span class="n">daughter</span> <span class="o">=</span> <span class="n">cell</span><span class="o">-&gt;</span><span class="n">Divide</span><span class="p">();</span>
      <span class="n">daughter</span><span class="o">-&gt;</span><span class="n">SetCellColour</span><span class="p">(</span><span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetCellColour</span><span class="p">());</span>
    <span class="p">}</span>
</pre></div></p>
<p>Cells will now have only 80% chance to divide. However, it will have 80% chance to divide at every simulation step! We want that if a cell doesn't divide, it will not be able to divide any more.
To do that, we will create a new MyCell boolean attribute called can_divide_. As well as for the cell_colour_ attribute (see chapter 3.2), add it our MyCell object header
<div class="codehilite"><pre><span></span><span class="n">BDM_SIM_OBJECT_HEADER</span><span class="p">(</span><span class="n">MyCellExt</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">can_divide_</span><span class="p">,</span> <span class="n">cell_colour_</span><span class="p">);</span>
</pre></div></p>
<p>and create three methods, <code class="codehilite">SetCanDivide()</code>, <code class="codehilite">GetCanDivide()</code> and <code class="codehilite">GetCanDividePtr()</code>.
<div class="codehilite"><pre><span></span>    <span class="kt">void</span> <span class="nf">SetCanDivide</span><span class="p">(</span><span class="kt">bool</span> <span class="n">d</span><span class="p">)</span> <span class="p">{</span> <span class="n">can_divide_</span><span class="p">[</span><span class="n">kIdx</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">bool</span> <span class="nf">GetCanDivide</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">can_divide_</span><span class="p">[</span><span class="n">kIdx</span><span class="p">];</span> <span class="p">}</span>
    <span class="kt">bool</span><span class="o">*</span> <span class="nf">GetCanDividePtr</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">can_divide_</span><span class="p">.</span><span class="n">data</span><span class="p">();</span> <span class="p">}</span>
</pre></div></p>
<p>Then, as for cell_colour_, declare this data member as private
<div class="codehilite"><pre><span></span>    <span class="n">vec</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">can_divide_</span><span class="p">;</span>
</pre></div></p>
<p>Now that we got a new attribute can_divide_, we need to change the <code class="codehilite">Run()</code> method to prevent cells that failed the 80% test to divide again.
Finaly, don't forget to set the daughter can_divide_ value to true after a cell division.
<div class="codehilite"><pre><span></span>        <span class="k">if</span> <span class="p">(</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span><span class="mf">0.8</span> <span class="o">&amp;&amp;</span> <span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetCanDivide</span><span class="p">()){</span>
          <span class="k">auto</span> <span class="n">daughter</span> <span class="o">=</span> <span class="n">cell</span><span class="o">-&gt;</span><span class="n">Divide</span><span class="p">();</span>
          <span class="n">daughter</span><span class="o">-&gt;</span><span class="n">SetCellColour</span><span class="p">(</span><span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetCellColour</span><span class="p">());</span> <span class="c1">// daughter take the cell_colour_ value of her mother</span>
          <span class="n">daughter</span><span class="o">-&gt;</span><span class="n">SetCanDivide</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span> <span class="c1">// the daughter will be able to divide</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
          <span class="n">cell</span><span class="o">-&gt;</span><span class="n">SetCanDivide</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span> <span class="c1">// this cell won&#39;t divide anymore</span>
        <span class="p">}</span>
</pre></div></p>
<p>The tutorial.h code corresponding to this chapter is accessible at the end of this tutorial.</p>
<p>You now have all the BioDynaMo cell basic knowledge to construct your own modelling!</p>
<h2 id="diffusion">Diffusion</h2>
<p>Coming soon.</p>
<h2 id="code">Code</h2>
<h3 id="tutorialcc">tutorial.cc</h3>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;tutorial.h&quot;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">bdm</span><span class="o">::</span><span class="n">Simulate</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span> <span class="p">}</span>
</pre></div>

<h3 id="tutorialh-chapter-22">tutorial.h - chapter 2.2</h3>
<div class="codehilite"><pre><span></span><span class="cp">#ifndef TUTORIAL_H_</span>
<span class="cp">#define TUTORIAL_H_</span>

<span class="cp">#include</span> <span class="cpf">&quot;biodynamo.h&quot;</span><span class="cp"></span>
<span class="c1">//using namespace std;</span>

<span class="k">namespace</span> <span class="n">bdm</span> <span class="p">{</span>

<span class="c1">// 1. Define growth behaviour</span>
  <span class="k">struct</span> <span class="nl">GrowthModule</span> <span class="p">:</span> <span class="k">public</span> <span class="n">BaseBiologyModule</span> <span class="p">{</span>
  <span class="n">GrowthModule</span><span class="p">()</span> <span class="o">:</span> <span class="n">BaseBiologyModule</span><span class="p">(</span><span class="n">gAllBmEvents</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
      <span class="kt">void</span> <span class="n">Run</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">cell</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetDiameter</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cell</span><span class="o">-&gt;</span><span class="n">ChangeVolume</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span><span class="p">{</span>
        <span class="n">cell</span><span class="o">-&gt;</span><span class="n">Divide</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">ClassDefNV</span><span class="p">(</span><span class="n">GrowthModule</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">};</span>

<span class="c1">// Define compile time parameter</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Backend</span><span class="o">&gt;</span>
    <span class="k">struct</span> <span class="nl">CompileTimeParam</span> <span class="p">:</span> <span class="k">public</span> <span class="n">DefaultCompileTimeParam</span><span class="o">&lt;</span><span class="n">Backend</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">using</span> <span class="n">BiologyModules</span> <span class="o">=</span> <span class="n">Variant</span><span class="o">&lt;</span><span class="n">GrowthModule</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="p">};</span>


<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">TResourceManager</span> <span class="o">=</span> <span class="n">ResourceManager</span><span class="o">&lt;&gt;&gt;</span>
<span class="kr">inline</span> <span class="kt">int</span> <span class="n">Simulate</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">InitializeBiodynamo</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>

  <span class="kt">size_t</span> <span class="n">nb_of_cells</span><span class="o">=</span><span class="mi">2400</span><span class="p">;</span> <span class="c1">// number of cells in the simulation</span>
  <span class="n">Param</span><span class="o">::</span><span class="n">min_bound_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">Param</span><span class="o">::</span><span class="n">max_bound_</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// cube of 100*100*100</span>
  <span class="kt">double</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">;</span>

  <span class="k">auto</span> <span class="n">rm</span> <span class="o">=</span> <span class="n">TResourceManager</span><span class="o">::</span><span class="n">Get</span><span class="p">();</span> <span class="c1">// set up resource manager</span>
  <span class="k">auto</span> <span class="n">cells</span> <span class="o">=</span> <span class="n">rm</span><span class="o">-&gt;</span><span class="k">template</span> <span class="n">Get</span><span class="o">&lt;</span><span class="n">Cell</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// create a structure to contain cells</span>
  <span class="n">cells</span><span class="o">-&gt;</span><span class="n">reserve</span><span class="p">(</span><span class="n">nb_of_cells</span><span class="p">);</span> <span class="c1">// allocate the correct number of cell in our cells structure before cell creation</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nb_of_cells</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// our modelling will be a cell cube of 100*100*100</span>
    <span class="n">x_coord</span><span class="o">=</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Param</span><span class="o">::</span><span class="n">max_bound</span><span class="p">);</span> <span class="c1">// random double between 0 and 100</span>
    <span class="n">y_coord</span><span class="o">=</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Param</span><span class="o">::</span><span class="n">max_bound</span><span class="p">);</span>
    <span class="n">z_coord</span><span class="o">=</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Param</span><span class="o">::</span><span class="n">max_bound</span><span class="p">);</span>

    <span class="n">Cell</span> <span class="nf">cell</span><span class="p">({</span><span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">});</span> <span class="c1">// creating the cell at position x, y, z</span>
    <span class="c1">// set cell parameters</span>
    <span class="n">cell</span><span class="p">.</span><span class="n">SetDiameter</span><span class="p">(</span><span class="mf">7.5</span><span class="p">);</span>

    <span class="n">cells</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">cell</span><span class="p">);</span> <span class="c1">// put the created cell in our cells structure</span>
  <span class="p">}</span>

  <span class="c1">// create a cancerous cell, containing the BiologyModule GrowthModule</span>
  <span class="n">Cell</span> <span class="n">cell</span><span class="p">({</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">});</span>
  <span class="n">cell</span><span class="p">.</span><span class="n">SetDiameter</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
  <span class="n">cell</span><span class="p">.</span><span class="n">AddBiologyModule</span><span class="p">(</span><span class="n">GrowthModule</span><span class="p">());</span>
  <span class="n">cells</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">cell</span><span class="p">);</span> <span class="c1">// put the created cell in our cells structure</span>

  <span class="n">cells</span><span class="o">-&gt;</span><span class="n">Commit</span><span class="p">();</span> <span class="c1">// commit cells</span>

  <span class="c1">// Run simulation</span>
  <span class="n">Scheduler</span><span class="o">&lt;&gt;</span> <span class="n">scheduler</span><span class="p">;</span>
  <span class="n">scheduler</span><span class="p">.</span><span class="n">Simulate</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>

  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Simulation completed successfully!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">}</span> <span class="c1">// namespace bdm</span>

<span class="cp">#endif </span><span class="c1">// TUTORIAL_H_</span>
</pre></div>

<h3 id="tutorialh-chapter-34">tutorial.h - chapter 3.4</h3>
<div class="codehilite"><pre><span></span><span class="cp">#ifndef TUTORIAL_H_</span>
<span class="cp">#define TUTORIAL_H_</span>

<span class="cp">#include</span> <span class="cpf">&quot;biodynamo.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;random.h&quot;</span><span class="cp"></span>
<span class="c1">//using namespace std;</span>

<span class="k">namespace</span> <span class="n">bdm</span> <span class="p">{</span>

  <span class="c1">// 0. Define my custom cell MyCell, which extends Cell by adding extra data members: cell_color and can_divide</span>
  <span class="n">BDM_SIM_OBJECT</span><span class="p">(</span><span class="n">MyCell</span><span class="p">,</span> <span class="n">Cell</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// our object extends the Cell object</span>
    <span class="n">BDM_SIM_OBJECT_HEADER</span><span class="p">(</span><span class="n">MyCellExt</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">can_divide_</span><span class="p">,</span> <span class="n">cell_colour_</span><span class="p">);</span> <span class="c1">// create the header with our new data member</span>

    <span class="k">public</span><span class="o">:</span>
      <span class="n">MyCellExt</span><span class="p">()</span> <span class="p">{}</span>
      <span class="n">MyCellExt</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;&amp;</span> <span class="n">position</span><span class="p">)</span> <span class="o">:</span> <span class="n">Base</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// our creator</span>

      <span class="c1">// getter and setter for our new data member</span>
      <span class="kt">void</span> <span class="n">SetCanDivide</span><span class="p">(</span><span class="kt">bool</span> <span class="n">d</span><span class="p">)</span> <span class="p">{</span> <span class="n">can_divide_</span><span class="p">[</span><span class="n">kIdx</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">;</span> <span class="p">}</span>
      <span class="kt">bool</span> <span class="n">GetCanDivide</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">can_divide_</span><span class="p">[</span><span class="n">kIdx</span><span class="p">];</span> <span class="p">}</span>
      <span class="kt">bool</span><span class="o">*</span> <span class="n">GetCanDividePtr</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">can_divide_</span><span class="p">.</span><span class="n">data</span><span class="p">();</span> <span class="p">}</span>

      <span class="kt">void</span> <span class="n">SetCellColour</span><span class="p">(</span><span class="kt">int</span> <span class="n">cellColour</span><span class="p">)</span> <span class="p">{</span> <span class="n">cell_colour_</span><span class="p">[</span><span class="n">kIdx</span><span class="p">]</span> <span class="o">=</span> <span class="n">cellColour</span><span class="p">;</span> <span class="p">}</span>
      <span class="kt">int</span> <span class="n">GetCellColour</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">cell_colour_</span><span class="p">[</span><span class="n">kIdx</span><span class="p">];</span> <span class="p">}</span>
      <span class="kt">int</span><span class="o">*</span> <span class="n">GetCellColourPtr</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">cell_colour_</span><span class="p">.</span><span class="n">data</span><span class="p">();</span> <span class="p">}</span>

    <span class="k">private</span><span class="o">:</span>
      <span class="c1">// declare new data member and define their type</span>
      <span class="c1">// private data can only be accessed by public function and not directly</span>
      <span class="n">vec</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">can_divide_</span><span class="p">;</span>
      <span class="n">vec</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">cell_colour_</span><span class="p">;</span>
  <span class="p">};</span>

<span class="c1">// 1. Define growth behaviour</span>
  <span class="k">struct</span> <span class="nl">GrowthModule</span> <span class="p">:</span> <span class="k">public</span> <span class="n">BaseBiologyModule</span> <span class="p">{</span>
  <span class="n">GrowthModule</span><span class="p">()</span> <span class="o">:</span> <span class="n">BaseBiologyModule</span><span class="p">(</span><span class="n">gAllBmEvents</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
      <span class="kt">void</span> <span class="n">Run</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">cell</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetDiameter</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cell</span><span class="o">-&gt;</span><span class="n">ChangeVolume</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>

        <span class="n">array</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span> <span class="n">cell_movements</span><span class="p">{</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)};</span> <span class="c1">// create an array of 3 random numbers between -2 and 2</span>
        <span class="n">cell</span><span class="o">-&gt;</span><span class="n">UpdatePosition</span><span class="p">(</span><span class="n">cell_movements</span><span class="p">);</span> <span class="c1">// update the cell mass location, ie move the cell</span>
        <span class="n">cell</span><span class="o">-&gt;</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetPosition</span><span class="p">());</span> <span class="c1">// set the cell position</span>
      <span class="p">}</span>

      <span class="k">else</span> <span class="p">{</span> <span class="c1">// if diameter &gt; 8</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span><span class="mf">0.8</span> <span class="o">&amp;&amp;</span> <span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetCanDivide</span><span class="p">()){</span>
          <span class="k">auto</span> <span class="n">daughter</span> <span class="o">=</span> <span class="n">cell</span><span class="o">-&gt;</span><span class="n">Divide</span><span class="p">();</span>
          <span class="n">daughter</span><span class="o">-&gt;</span><span class="n">SetCellColour</span><span class="p">(</span><span class="n">cell</span><span class="o">-&gt;</span><span class="n">GetCellColour</span><span class="p">());</span> <span class="c1">// daughter take the cell_colour_ value of her mother</span>
          <span class="n">daughter</span><span class="o">-&gt;</span><span class="n">SetCanDivide</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span> <span class="c1">// the daughter will be able to divide</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
          <span class="n">cell</span><span class="o">-&gt;</span><span class="n">SetCanDivide</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span> <span class="c1">// this cell won&#39;t divide anymore</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">ClassDefNV</span><span class="p">(</span><span class="n">GrowthModule</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">};</span>

<span class="c1">// Define compile time parameter</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Backend</span><span class="o">&gt;</span>
    <span class="k">struct</span> <span class="nl">CompileTimeParam</span> <span class="p">:</span> <span class="k">public</span> <span class="n">DefaultCompileTimeParam</span><span class="o">&lt;</span><span class="n">Backend</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">using</span> <span class="n">BiologyModules</span> <span class="o">=</span> <span class="n">Variant</span><span class="o">&lt;</span><span class="n">GrowthModule</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// add GrowthModule</span>
  <span class="k">using</span> <span class="n">AtomicTypes</span> <span class="o">=</span> <span class="n">VariadicTypedef</span><span class="o">&lt;</span><span class="n">MyCell</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// use MyCell object</span>
  <span class="p">};</span>

<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">TResourceManager</span> <span class="o">=</span> <span class="n">ResourceManager</span><span class="o">&lt;&gt;&gt;</span>

<span class="kr">inline</span> <span class="kt">int</span> <span class="n">Simulate</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">InitializeBiodynamo</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>

  <span class="kt">size_t</span> <span class="n">nb_of_cells</span><span class="o">=</span><span class="mi">2400</span><span class="p">;</span> <span class="c1">// number of cells in the simulation</span>
  <span class="kt">double</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">;</span>

  <span class="n">Param</span><span class="o">::</span><span class="n">bound_space_</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="n">Param</span><span class="o">::</span><span class="n">min_bound_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">Param</span><span class="o">::</span><span class="n">max_bound_</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// cube of 100*100*100</span>
  <span class="n">Param</span><span class="o">::</span><span class="n">run_mechanical_interactions_</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

  <span class="k">auto</span> <span class="n">rm</span> <span class="o">=</span> <span class="n">TResourceManager</span><span class="o">::</span><span class="n">Get</span><span class="p">();</span> <span class="c1">// set up resource manager</span>
  <span class="k">auto</span> <span class="n">cells</span> <span class="o">=</span> <span class="n">rm</span><span class="o">-&gt;</span><span class="k">template</span> <span class="n">Get</span><span class="o">&lt;</span><span class="n">MyCell</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// create a structure to contain cells</span>
  <span class="n">cells</span><span class="o">-&gt;</span><span class="n">reserve</span><span class="p">(</span><span class="n">nb_of_cells</span><span class="p">);</span> <span class="c1">// allocate the correct number of cell in our cells structure before cell creation</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nb_of_cells</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// our modelling will be a cell cube of 100*100*100</span>
    <span class="n">x_coord</span><span class="o">=</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="n">Param</span><span class="o">::</span><span class="n">min_bound_</span><span class="p">,</span> <span class="n">Param</span><span class="o">::</span><span class="n">max_bound_</span><span class="p">);</span> <span class="c1">// random double between 0 and 100</span>
    <span class="n">y_coord</span><span class="o">=</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="n">Param</span><span class="o">::</span><span class="n">min_bound_</span><span class="p">,</span> <span class="n">Param</span><span class="o">::</span><span class="n">max_bound_</span><span class="p">);</span>
    <span class="n">z_coord</span><span class="o">=</span><span class="n">gTRandom</span><span class="p">.</span><span class="n">Uniform</span><span class="p">(</span><span class="n">Param</span><span class="o">::</span><span class="n">min_bound_</span><span class="p">,</span> <span class="n">Param</span><span class="o">::</span><span class="n">max_bound_</span><span class="p">);</span>

    <span class="n">MyCell</span> <span class="nf">cell</span><span class="p">({</span><span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">});</span> <span class="c1">// creating the cell at position x, y, z</span>
    <span class="c1">// set cell parameters</span>
    <span class="n">cell</span><span class="p">.</span><span class="n">SetDiameter</span><span class="p">(</span><span class="mf">7.5</span><span class="p">);</span>
    <span class="n">cell</span><span class="p">.</span><span class="n">SetCellColour</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="n">y_coord</span><span class="o">/</span><span class="n">Param</span><span class="o">::</span><span class="n">max_bound_</span><span class="o">*</span><span class="mi">6</span><span class="p">));</span> <span class="c1">// will vary from 0 to 5. so 6 different layers depending on y_coord</span>

    <span class="n">cells</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">cell</span><span class="p">);</span> <span class="c1">// put the created cell in our cells structure</span>
  <span class="p">}</span>

  <span class="c1">// create a cancerous cell, containing the BiologyModule GrowthModule</span>
  <span class="n">MyCell</span> <span class="n">cell</span><span class="p">({</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">});</span>
  <span class="n">cell</span><span class="p">.</span><span class="n">SetDiameter</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
  <span class="n">cell</span><span class="p">.</span><span class="n">SetCellColour</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
  <span class="n">cell</span><span class="p">.</span><span class="n">SetCanDivide</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
  <span class="n">cell</span><span class="p">.</span><span class="n">AddBiologyModule</span><span class="p">(</span><span class="n">GrowthModule</span><span class="p">());</span>
  <span class="n">cells</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">cell</span><span class="p">);</span> <span class="c1">// put the created cell in our cells structure</span>

  <span class="n">cells</span><span class="o">-&gt;</span><span class="n">Commit</span><span class="p">();</span> <span class="c1">// commit cells</span>


  <span class="c1">// Run simulation</span>
  <span class="n">Scheduler</span><span class="o">&lt;&gt;</span> <span class="n">scheduler</span><span class="p">;</span>
  <span class="n">scheduler</span><span class="p">.</span><span class="n">Simulate</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>

  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Simulation completed successfully!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">}</span> <span class="c1">// namespace bdm</span>

<span class="cp">#endif </span><span class="c1">// TUTORIAL_H_</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../diffusion/" title="Diffusion" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Diffusion
              </span>
            </div>
          </a>
        
        
          <a href="../substance_initializers/" title="Substance Initialization" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Substance Initialization
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; The BioDynaMo Project. All Rights Reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="http://biodynamo.web.cern.ch" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/BioDynaMo/biodynamo" class="md-footer-social__link fa fa-github-alt"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>
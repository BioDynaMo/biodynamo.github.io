var hbs = require('express-hbs');
var fs = require('fs');
var path = require('path');

hbs.registerHelper('readfile', function (pathName, fileName) {
    var fullPath = pathName + fileName;
    var filePath = path.join(global.__basedir, fullPath);

    // Sync file reading
    // @todo: change this to async!!
    try {
        var fileContents = fs.readFileSync(filePath, 'utf8');
    } catch (err) {
        console.log(err); // eslint-disable-line
    }

    if (fileContents) {
        return new hbs.handlebars.SafeString(fileContents);
    } else {
        return new hbs.handlebars.SafeString('');
    }
});

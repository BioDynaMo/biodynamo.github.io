var hbs = require('express-hbs');
var fs = require('fs');
var path = require('path');

hbs.registerHelper('readcssdir', function (section, dir, activeFile) {
    var dirPath = path.join(global.__basedir, ('resources/assets/css/' + dir));
    var cssFiles = '';
    var i = 0;

    fs.readdirSync(dirPath).forEach((file) => {
        cssFiles = cssFiles + '<li class="' + (i == 0 ? 'mt5' : 'mt3') + '"><a href="/design/' + section + '/reference/' + file + '" class="link middarkgrey hover-darkgrey' + (activeFile == file ? ' active-left-menu' : '') + '">' + file + '</a></li>'; // eslint-disable-line
        i = i + 1;
    });

    return new hbs.handlebars.SafeString(cssFiles);
});

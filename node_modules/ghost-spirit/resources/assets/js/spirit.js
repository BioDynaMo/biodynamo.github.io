'use strict';

// Dropdown Menus
function initDropdowns(allDropdowns) {
    allDropdowns.children('.gho-dd-trigger').on('click', function (e) {
        e.stopPropagation();

        var thisTrigger = $(this),
            thisDropdown = thisTrigger.parent();

        if (thisDropdown.hasClass('active')) {
            thisDropdown.removeClass('active');
            $(document).off('click');
        } else {
            allDropdowns.removeClass('active');
            thisDropdown.addClass('active');
            $(document).on('click', function () {
                allDropdowns.removeClass('active');
            });
        }
    });
}

/* UI Components
/* ------------------------------------------------ */
function initUIComponents() {
    $('.js-checkbox').on('click', function (){
        $(this).toggleClass('form-checkbox b--whitegrey-d1 bg-whitegrey-l1 b--green-d1 bg-green');
    });

    $('.js-toggle-action-bar').on('click', function (){
        $('.js-text-action-bar').toggleClass('o-0 pop-down');
    });
}

function initAccNavigation() {
    $('.js-tab').on('click', function (){
        var currentTab = $(this);
        closeAllTabs(currentTab);
    });
}

function closeAllTabs(currentTab) {
    $('.js-tab').each(function (i, obj){
        if ($(obj).attr('id') !== currentTab.attr('id')) {
            $(obj).prop('checked', false);
        }
    });
}

// DO THE THINGS
$(document).ready(function () {
    // Dropdown Menu Triggers
    initDropdowns($('.js-version'));

    // UI Components
    initUIComponents();

    // Accordion
    initAccNavigation();
});
